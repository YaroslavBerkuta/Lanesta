!function(){"use strict";var t={n:function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,{a:s}),s},d:function(e,s){for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e=class{static get(t,e="general"){Array.isArray(t)||(t=[t]);let s=window["_wds_"+e]||{};return t.forEach((t=>{s=s&&s.hasOwnProperty(t)?s[t]:""})),s}static get_bool(t,e="general"){return!!this.get(t,e)}},s=jQuery,r=t.n(s);class i{static truncate_string(t,e){return t.length>e&&(t=Array.from(t).splice(0,e-4).join("").trim()+" ..."),t}static normalize_whitespace(t){return(t=(t=t.replace(/(\r\n|\n|\r|\t)/gm," ")).replace(/[ ]+/g," ")).trim()}static remove_shortcodes(t){if(-1===(t=t||"").indexOf("["))return t;let s=this;return t.replace(/\[(\[?)([a-zA-Z0-9_-]*)(?![\w-])([^\]\/]*(?:\/(?!\])[^\]\/]*)*?)(?:(\/)\]|\](?:([^\[]*(?:\[(?!\/\2\])[^\[]*)*)\[\/\2\])?)(\]?)/g,(function(t,r,i,n,o,a,l,_,h){if(arguments.length<7)return t||"";if("["===r&&"]"===l)return t.substring(1,t.length-1);let d=e.get("omitted_shortcodes","replacement");return a&&!d.includes(i)?s.remove_shortcodes(a.trim()):""}))}static strip_html(t){let e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""}static process_string(t,e=!1){return t=i.strip_html(t),t=i.normalize_whitespace(t),e&&(t=i.truncate_string(t,e)),t}}var n=i;class o{constructor(t,e,s){if(!this.is_field_valid(t))return;this.$el=t,this.macroReplacementFunction=e,this.upper=s.upper||0,this.lower=s.lower||0,this.default_value=s.default_value||"";let r=.08*this.upper;this.almost_lower=this.lower+r,this.almost_upper=this.upper-r,this.init_element(t),this.init_listeners(),this.update_indicator()}init_listeners(){this.$el.on("input propertychange",_.debounce((()=>this.update_indicator()),200)).one("input propertychange",(()=>this.add_resolving_class()))}is_field_valid(t){return!t.is(this.field_selector())&&t.is("input,textarea")}init_element(t){return t.addClass(this.field_class()),r()("<div><span></span><span></span></div>").addClass(this.indicator_class()).insertAfter(t),t}get_indicator(){return this.$el.next(this.indicator_selector())}get_bar(){return this.get_indicator().find("span").first()}get_char_count_container(){return this.get_indicator().find("span").last()}reset_classes(){this.$el.removeClass("over almost-over just-right almost-under under")}remove_resolving_class(){this.$el.removeClass("resolving")}add_resolving_class(){this.$el.addClass("resolving")}update_indicator(){let t=this.$el.val();if(t=t||this.default_value,!t)return this.get_char_count_container().hide(),this.reset_classes(),void this.remove_resolving_class();this.macroReplacementFunction(t).then((t=>{t=n.strip_html(t),t=n.normalize_whitespace(t);let s=Array.from(t).length,r=s/((this.upper+this.lower)/2)*100;this.remove_resolving_class(),this.$el.one("input propertychange",(()=>this.add_resolving_class())),r/=2,r=r>100?100:r,this.get_bar().width(r+"%");let i=this.get_char_count_container();i.html(s+" / "+this.lower+"-"+this.upper+" "+e.get(["strings","characters"],"admin")),s?i.show():i.hide(),this.reset_classes(),s>this.upper?this.$el.addClass("over"):this.almost_upper<s&&s<=this.upper?this.$el.addClass("almost-over"):this.almost_lower<=s&&s<=this.almost_upper?this.$el.addClass("just-right"):this.lower<=s&&s<this.almost_lower?this.$el.addClass("almost-under"):this.lower>s&&this.$el.addClass("under")}))}field_class(){return"wds-optimum-length-indicator-field"}field_selector(){return"."+this.field_class()}indicator_class(){return"wds-optimum-length-indicator"}indicator_selector(){return"."+this.indicator_class()}}class a{constructor(){}set_id(t){return this.id=t,this}get_id(){return this.id}set_title(t){return this.title=t,this}get_title(){return this.title}set_slug(t){return this.slug=t,this}get_slug(){return this.slug}set_description(t){return this.description=t,this}get_description(){return this.description}set_taxonomy(t){return this.taxonomy=t,this}get_taxonomy(){return this.taxonomy}set_permalink(t){return this.permalink=t,this}get_permalink(){return this.permalink}}!function(){window.Wds.randomPosts={},window.Wds.randomTerms={};let t=e.get("random_posts","onpage_components");Object.keys(t).forEach((e=>{let s=t[e],r=new class{constructor(){this.taxonomies={}}set_id(t){return this.id=t,this}get_id(){return this.id}set_type(t){return this.type=t,this}get_type(){return this.type}set_author_id(t){return this.author_id=t,this}get_author_id(){return this.author_id}set_title(t){return this.title=t,this}get_title(){return this.title}set_content(t){return this.content=t,this}get_content(){return this.content}set_excerpt(t){return this.excerpt=t,this}get_excerpt(){return this.excerpt}set_category_ids(t){return this.set_taxonomy_terms("category",t),this}get_category_ids(){return this.get_taxonomy_terms("category")}set_tag_ids(t){return this.set_taxonomy_terms("post_tag",t),this}get_tag_ids(){return this.get_taxonomy_terms("post_tag")}set_slug(t){return this.slug=t,this}get_slug(){return this.slug}set_date(t){return this.date=t,this}get_date(){return this.date}set_modified(t){return this.modified=t,this}get_modified(){return this.modified}set_permalink(t){return this.permalink=t,this}get_permalink(){return this.permalink}set_taxonomy_terms(t,e){this.taxonomies[t]=e}get_taxonomy_terms(t){return this.taxonomies.hasOwnProperty(t)?this.taxonomies[t]:[]}};r.set_id(s.ID).set_type(s.post_type).set_author_id(s.post_author).set_title(s.post_title).set_content(s.post_content).set_excerpt(s.post_excerpt).set_slug(s.post_name).set_date(new Date(s.post_date)).set_modified(new Date(s.post_modified)).set_permalink(s.permalink),s.taxonomy_terms&&Object.keys(s.taxonomy_terms).forEach((t=>{r.set_taxonomy_terms(t,s.taxonomy_terms[t])})),window.Wds.randomPosts[e]=r}));let s=e.get("random_terms","onpage_components");Object.keys(s).forEach((t=>{let e=s[t],r=new a;r.set_id(e.term_id).set_title(e.name).set_slug(e.slug).set_description(e.description).set_permalink(e.permalink).set_taxonomy(t),window.Wds.randomTerms[t]=r})),window.Wds.OptimumLengthIndicator=o,window.Wds.String_Utils=n}(jQuery)}();